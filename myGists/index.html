<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Gist Library - Code Snippets Repository</title>

  <!-- Include Prism for syntax highlighting -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">

  <!-- Include custom styles -->
  <link rel="stylesheet" href="styles.css">

  <!-- Meta tags for sharing -->
  <meta property="og:title" content="Advanced Gist Library">
  <meta property="og:description" content="Professional code snippets repository with advanced features">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
</head>

<body>
  <!-- Header Section -->
  <header class="library-header">
    <div class="header-container">
      <h1 class="library-title">
        <svg class="logo-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
        </svg>
        Gist Library
      </h1>

      <nav class="header-nav">
        <button class="nav-btn active" data-filter="all">
          <span class="nav-icon">üìö</span>
          All Gists
        </button>
        <button class="nav-btn" data-filter="favorites">
          <span class="nav-icon">‚≠ê</span>
          Favorites
        </button>
        <button class="nav-btn" data-filter="recent">
          <span class="nav-icon">üïí</span>
          Recent
        </button>
      </nav>

      <div class="header-actions">
        <button class="action-btn" id="add-gist">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Add Gist
        </button>
        <button class="action-btn" id="export-favorites">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          Export
        </button>
      </div>
    </div>
  </header>

  <!-- Search and Filter Section -->
  <section class="search-section">
    <div class="search-container">
      <div class="search-wrapper">
        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        <input type="text" id="search-input" class="search-input" placeholder="Search gists by title, description, tags, or code..." autocomplete="off">
        <div id="search-suggestions" class="search-suggestions"></div>
      </div>

      <div class="filter-controls">
        <select id="language-filter" class="filter-select">
          <option value="">All Languages</option>
          <option value="javascript">JavaScript</option>
          <option value="python">Python</option>
          <option value="css">CSS</option>
          <option value="html">HTML</option>
          <option value="php">PHP</option>
          <option value="sql">SQL</option>
          <option value="react">React</option>
          <option value="vue">Vue</option>
        </select>

        <select id="category-filter" class="filter-select">
          <option value="">All Categories</option>
          <option value="debug">üêõ Debugging</option>
          <option value="utility">üîß Utilities</option>
          <option value="animation">‚ú® Animations</option>
          <option value="api">üîå API Integration</option>
          <option value="dom">üìÑ DOM Manipulation</option>
          <option value="validation">‚úÖ Validation</option>
          <option value="data">üìä Data Processing</option>
          <option value="ui">üé® UI Components</option>
        </select>

        <select id="sort-filter" class="filter-select">
          <option value="relevance">Sort by Relevance</option>
          <option value="newest">Newest First</option>
          <option value="oldest">Oldest First</option>
          <option value="popular">Most Viewed</option>
          <option value="downloads">Most Downloaded</option>
          <option value="alphabetical">Alphabetical</option>
        </select>
      </div>
    </div>
  </section>

  <!-- Category Pills -->
  <section class="categories-section">
    <div class="categories-container" id="category-pills"></div>
  </section>

  <!-- Main Content Container -->
  <main class="main-content">
    <div class="gist-container" id="gist-container">

      <!-- JavaScript Debug Logger Gist -->
      <div class="card gist" data-lang="javascript" data-cat="debug" data-id="6484570001">
        <div class="toolBar">
          <div class="option" id="copy" title="Copy code">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </div>
          <div class="option" id="share" title="Share gist">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
          </div>
          <div class="option" id="download" title="Download file">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </div>
          <div class="option" id="favorite" title="Add to favorites">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
          </div>
        </div>

        <textarea class="description" rows="3" readonly>Web Page Debugging Script
Developer Options Console Log</textarea>

        <pre><code class="language-javascript">// Advanced Console Logger
const debugLogger = {
  enabled: localStorage.getItem('debugMode') === 'true',
  
  log: function(message, type = 'info') {
    if (!this.enabled) return;
    
    const timestamp = new Date().toISOString();
    const styles = {
      info: 'color: #61afef',
      warn: 'color: #e5c07b',
      error: 'color: #e06c75',
      success: 'color: #98c379'
    };
    
    console.log(`%c[${timestamp}] ${message}`, styles[type] || styles.info);
    this.saveToHistory({ timestamp, message, type });
  },
  
  saveToHistory: function(entry) {
    const history = JSON.parse(localStorage.getItem('debugHistory') || '[]');
    history.push(entry);
    if (history.length > 100) history.shift();
    localStorage.setItem('debugHistory', JSON.stringify(history));
  }
};</code></pre>

        <div class="card-footer">
          <div class="tags">
            <span class="tag">#debugging</span>
            <span class="tag">#console</span>
            <span class="tag">#development</span>
          </div>
          <div class="stats">
            <span>üì• 89</span>
            <span>üëÅÔ∏è 342</span>
          </div>
        </div>
      </div>

      <!-- Smooth Scroll Animation Gist -->
      <div class="card gist" data-lang="javascript" data-cat="animation" data-id="6484570002">
        <div class="toolBar">
          <div class="option" id="copy" title="Copy code">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </div>
          <div class="option" id="share" title="Share gist">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
          </div>
          <div class="option" id="download" title="Download file">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </div>
          <div class="option" id="favorite" title="Add to favorites">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
          </div>
        </div>

        <textarea class="description" rows="3" readonly>Smooth Scroll to Element
Customizable easing animation for page scrolling</textarea>

        <pre><code class="language-javascript">// Smooth Scroll Implementation
function smoothScrollTo(element, duration = 1000) {
  const target = typeof element === 'string' 
    ? document.querySelector(element) 
    : element;
    
  if (!target) return;
  
  const targetPosition = target.getBoundingClientRect().top;
  const startPosition = window.pageYOffset;
  const distance = targetPosition;
  let startTime = null;
  
  // Easing functions
  const easings = {
    linear: t => t,
    easeInQuad: t => t * t,
    easeOutQuad: t => t * (2 - t),
    easeInOutQuad: t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,
    easeInCubic: t => t * t * t,
    easeOutCubic: t => (--t) * t * t + 1,
    easeInOutCubic: t => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1
  };
  
  function animation(currentTime) {
    if (startTime === null) startTime = currentTime;
    const timeElapsed = currentTime - startTime;
    const progress = Math.min(timeElapsed / duration, 1);
    const ease = easings.easeInOutCubic(progress);
    
    window.scrollTo(0, startPosition + distance * ease);
    
    if (timeElapsed < duration) {
      requestAnimationFrame(animation);
    }
  }
  
  requestAnimationFrame(animation);
}

// Usage examples
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    smoothScrollTo(this.getAttribute('href'));
  });
});</code></pre>

        <div class="card-footer">
          <div class="tags">
            <span class="tag">#animation</span>
            <span class="tag">#scroll</span>
            <span class="tag">#ui</span>
            <span class="tag">#smoothscroll</span>
          </div>
          <div class="stats">
            <span>üì• 156</span>
            <span>üëÅÔ∏è 523</span>
          </div>
        </div>
      </div>

      <!-- API Fetch Wrapper Gist -->
      <div class="card gist" data-lang="javascript" data-cat="api" data-id="6484570003">
        <div class="toolBar">
          <div class="option" id="copy" title="Copy code">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </div>
          <div class="option" id="share" title="Share gist">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
          </div>
          <div class="option" id="download" title="Download file">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </div>
          <div class="option" id="favorite" title="Add to favorites">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
          </div>
        </div>

        <textarea class="description" rows="3" readonly>Advanced Fetch API Wrapper
Robust error handling and request interceptors</textarea>

        <pre><code class="language-javascript">// Advanced API Client
class APIClient {
  constructor(baseURL, options = {}) {
    this.baseURL = baseURL;
    this.headers = {
      'Content-Type': 'application/json',
      ...options.headers
    };
    this.interceptors = {
      request: [],
      response: []
    };
    this.timeout = options.timeout || 30000;
  }

  // Add request interceptor
  addRequestInterceptor(fn) {
    this.interceptors.request.push(fn);
  }

  // Add response interceptor
  addResponseInterceptor(fn) {
    this.interceptors.response.push(fn);
  }

  // Main request method
  async request(endpoint, options = {}) {
    let url = `${this.baseURL}${endpoint}`;
    let config = {
      ...options,
      headers: { ...this.headers, ...options.headers }
    };

    // Apply request interceptors
    for (const interceptor of this.interceptors.request) {
      config = await interceptor(config);
    }

    // Add timeout
    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), this.timeout);

    try {
      const response = await fetch(url, {
        ...config,
        signal: controller.signal
      });

      clearTimeout(timeoutId);

      // Apply response interceptors
      let processedResponse = response;
      for (const interceptor of this.interceptors.response) {
        processedResponse = await interceptor(processedResponse);
      }

      if (!processedResponse.ok) {
        throw new Error(`HTTP error! status: ${processedResponse.status}`);
      }

      const data = await processedResponse.json();
      return { data, status: processedResponse.status };

    } catch (error) {
      clearTimeout(timeoutId);
      
      if (error.name === 'AbortError') {
        throw new Error('Request timeout');
      }
      
      throw error;
    }
  }

  // Convenience methods
  get(endpoint, options = {}) {
    return this.request(endpoint, { ...options, method: 'GET' });
  }

  post(endpoint, data, options = {}) {
    return this.request(endpoint, {
      ...options,
      method: 'POST',
      body: JSON.stringify(data)
    });
  }

  put(endpoint, data, options = {}) {
    return this.request(endpoint, {
      ...options,
      method: 'PUT',
      body: JSON.stringify(data)
    });
  }

  delete(endpoint, options = {}) {
    return this.request(endpoint, { ...options, method: 'DELETE' });
  }
}

// Usage example
const api = new APIClient('https://api.example.com', {
  headers: { 'X-API-Key': 'your-api-key' }
});

// Add auth interceptor
api.addRequestInterceptor(async (config) => {
  const token = localStorage.getItem('authToken');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// Add logging interceptor
api.addResponseInterceptor(async (response) => {
  console.log(`[${response.status}] ${response.url}`);
  return response;
});</code></pre>

        <div class="card-footer">
          <div class="tags">
            <span class="tag">#api</span>
            <span class="tag">#fetch</span>
            <span class="tag">#http</span>
            <span class="tag">#ajax</span>
          </div>
          <div class="stats">
            <span>üì• 234</span>
            <span>üëÅÔ∏è 867</span>
          </div>
        </div>
      </div>

      <!-- CSS Glassmorphism Card -->
      <div class="card gist" data-lang="css" data-cat="ui" data-id="6484570004">
        <div class="toolBar">
          <div class="option" id="copy" title="Copy code">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </div>
          <div class="option" id="share" title="Share gist">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
          </div>
          <div class="option" id="download" title="Download file">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </div>
          <div class="option" id="favorite" title="Add to favorites">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
          </div>
        </div>

        <textarea class="description" rows="3" readonly>Modern Glassmorphism Card
Beautiful frosted glass effect with backdrop blur</textarea>

        <pre><code class="language-css">/* Glassmorphism Card Design */
.glass-card {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10px) saturate(180%);
  -webkit-backdrop-filter: blur(10px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.18);
  border-radius: 16px;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.37),
    inset 0 0 0 1px rgba(255, 255, 255, 0.1);
  padding: 2rem;
  position: relative;
  overflow: hidden;
}

/* Gradient border effect */
.glass-card::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 16px;
  padding: 1px;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.3),
    rgba(255, 255, 255, 0.05)
  );
  -webkit-mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* Hover effects */
.glass-card:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.25);
  transform: translateY(-2px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 
    0 12px 48px rgba(0, 0, 0, 0.4),
    inset 0 0 0 1px rgba(255, 255, 255, 0.15);
}

/* Content styling */
.glass-card h3 {
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  background: linear-gradient(135deg, #fff 0%, #aaa 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.glass-card p {
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.6;
  margin-bottom: 1rem;
}

/* Button inside glass card */
.glass-button {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.9);
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  backdrop-filter: blur(10px);
}

.glass-button:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.3);
  transform: scale(1.05);
}

/* Dark mode variant */
@media (prefers-color-scheme: dark) {
  .glass-card {
    background: rgba(255, 255, 255, 0.03);
    border-color: rgba(255, 255, 255, 0.1);
  }
}</code></pre>

        <div class="card-footer">
          <div class="tags">
            <span class="tag">#glassmorphism</span>
            <span class="tag">#ui</span>
            <span class="tag">#modern</span>
            <span class="tag">#css</span>
          </div>
          <div class="stats">
            <span>üì• 412</span>
            <span>üëÅÔ∏è 1.2k</span>
          </div>
        </div>
      </div>

      <!-- Python Data Processing Gist -->
      <div class="card gist" data-lang="python" data-cat="data" data-id="6484570005">
        <div class="toolBar">
          <div class="option" id="copy" title="Copy code">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </div>
          <div class="option" id="share" title="Share gist">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
          </div>
          <div class="option" id="download" title="Download file">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </div>
          <div class="option" id="favorite" title="Add to favorites">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9aa4b2" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
          </div>
        </div>

        <textarea class="description" rows="3" readonly>Pandas DataFrame Operations
Advanced data manipulation and analysis utilities</textarea>

        <pre><code class="language-python"># Advanced DataFrame Processing Utilities
import pandas as pd
import numpy as np
from typing import List, Dict, Union, Optional

class DataFrameProcessor:
    """Advanced utilities for pandas DataFrame operations"""
    
    @staticmethod
    def smart_fillna(df: pd.DataFrame, 
                     strategy: Dict[str, str]) -> pd.DataFrame:
        """
        Fill NaN values with different strategies per column
        
        Args:
            df: Input DataFrame
            strategy: Dict mapping column names to fill strategies
                     ('mean', 'median', 'mode', 'ffill', 'bfill', value)
        """
        df_copy = df.copy()
        
        for col, method in strategy.items():
            if col not in df_copy.columns:
                continue
                
            if method == 'mean':
                df_copy[col].fillna(df_copy[col].mean(), inplace=True)
            elif method == 'median':
                df_copy[col].fillna(df_copy[col].median(), inplace=True)
            elif method == 'mode':
                mode_val = df_copy[col].mode()
                if not mode_val.empty:
                    df_copy[col].fillna(mode_val[0], inplace=True)
            elif method == 'ffill':
                df_copy[col].fillna(method='ffill', inplace=True)
            elif method == 'bfill':
                df_copy[col].fillna(method='bfill', inplace=True)
            else:
                df_copy[col].fillna(method, inplace=True)
                
        return df_copy
    
    @staticmethod
    def detect_outliers(df: pd.DataFrame, 
                       columns: Optional[List[str]] = None,
                       method: str = 'iqr',
                       threshold: float = 1.5) -> pd.DataFrame:
        """
        Detect outliers using IQR or Z-score method
        
        Args:
            df: Input DataFrame
            columns: Columns to check (None for all numeric)
            method: 'iqr' or 'zscore'
            threshold: IQR multiplier or z-score threshold
        """
        if columns is None:
            columns = df.select_dtypes(include=[np.number]).columns.tolist()
        
        outliers = pd.DataFrame(index=df.index)
        
        for col in columns:
            if col not in df.columns:
                continue
                
            if method == 'iqr':
                Q1 = df[col].quantile(0.25)
                Q3 = df[col].quantile(0.75)
                IQR = Q3 - Q1
                lower = Q1 - threshold * IQR
                upper = Q3 + threshold * IQR
                outliers[f'{col}_outlier'] = (df[col] < lower) | (df[col] > upper)
            
            elif method == 'zscore':
                z_scores = np.abs((df[col] - df[col].mean()) / df[col].std())
                outliers[f'{col}_outlier'] = z_scores > threshold
                
        return outliers
    
    @staticmethod
    def create_time_features(df: pd.DataFrame, 
                           date_column: str) -> pd.DataFrame:
        """
        Extract time-based features from datetime column
        """
        df_copy = df.copy()
        df_copy[date_column] = pd.to_datetime(df_copy[date_column])
        
        # Extract features
        df_copy[f'{date_column}_year'] = df_copy[date_column].dt.year
        df_copy[f'{date_column}_month'] = df_copy[date_column].dt.month
        df_copy[f'{date_column}_day'] = df_copy[date_column].dt.day
        df_copy[f'{date_column}_dayofweek'] = df_copy[date_column].dt.dayofweek
        df_copy[f'{date_column}_quarter'] = df_copy[date_column].dt.quarter
        df_copy[f'{date_column}_is_weekend'] = df_copy[date_column].dt.dayofweek.isin([5, 6])
        
        return df_copy
    
    @staticmethod
    def memory_optimize(df: pd.DataFrame) -> pd.DataFrame:
        """
        Reduce memory usage by optimizing data types
        """
        df_copy = df.copy()
        
        for col in df_copy.columns:
            col_type = df_copy[col].dtype
            
            if col_type != 'object':
                c_min = df_copy[col].min()
                c_max = df_copy[col].max()
                
                if str(col_type)[:3] == 'int':
                    if c_min > np.iinfo(np.int8).min and c_max < np.iinfo(np.int8).max:
                        df_copy[col] = df_copy[col].astype(np.int8)
                    elif c_min > np.iinfo(np.int16).min and c_max < np.iinfo(np.int16).max:
                        df_copy[col] = df_copy[col].astype(np.int16)
                    elif c_min > np.iinfo(np.int32).min and c_max < np.iinfo(np.int32).max:
                        df_copy[col] = df_copy[col].astype(np.int32)
                else:
                    if c_min > np.finfo(np.float16).min and c_max < np.finfo(np.float16).max:
                        df_copy[col] = df_copy[col].astype(np.float16)
                    elif c_min > np.finfo(np.float32).min and c_max < np.finfo(np.float32).max:
                        df_copy[col] = df_copy[col].astype(np.float32)
                        
        return df_copy</code></pre>

        <div class="card-footer">
          <div class="tags">
            <span class="tag">#pandas</span>
            <span class="tag">#dataframe</span>
            <span class="tag">#python</span>
            <span class="tag">#analysis</span>
          </div>
          <div class="stats">
            <span>üì• 189</span>
            <span>üëÅÔ∏è 756</span>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Add Gist Modal -->
  <div id="add-gist-modal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>Add New Gist</h2>
        <button class="close-modal">‚úï</button>
      </div>
      <form id="add-gist-form" class="gist-form">
        <div class="form-group">
          <label for="gist-title">Title</label>
          <input type="text" id="gist-title" required placeholder="Enter gist title">
        </div>

        <div class="form-group">
          <label for="gist-description">Description</label>
          <textarea id="gist-description" rows="3" placeholder="Describe what this code does"></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="gist-language">Language</label>
            <select id="gist-language" required>
              <option value="">Select language</option>
              <option value="javascript">JavaScript</option>
              <option value="python">Python</option>
              <option value="css">CSS</option>
              <option value="html">HTML</option>
              <option value="php">PHP</option>
              <option value="sql">SQL</option>
              <option value="react">React</option>
              <option value="vue">Vue</option>
            </select>
          </div>

          <div class="form-group">
            <label for="gist-category">Category</label>
            <select id="gist-category" required>
              <option value="">Select category</option>
              <option value="debug">Debugging</option>
              <option value="utility">Utilities</option>
              <option value="animation">Animations</option>
              <option value="api">API Integration</option>
              <option value="dom">DOM Manipulation</option>
              <option value="validation">Validation</option>
              <option value="data">Data Processing</option>
              <option value="ui">UI Components</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="gist-tags">Tags (comma separated)</label>
          <input type="text" id="gist-tags" placeholder="e.g. async, promise, error-handling">
        </div>

        <div class="form-group">
          <label for="gist-code">Code</label>
          <textarea id="gist-code" rows="15" required placeholder="Paste your code here"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-secondary" id="cancel-add-gist">Cancel</button>
          <button type="submit" class="btn-primary">Add Gist</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Loading Indicator -->
  <div id="loading-indicator" class="loading-indicator">
    <div class="spinner"></div>
  </div>

  <!-- Footer -->
  <footer class="library-footer">
    <div class="footer-content">
      <p>&copy; 2025 Advanced Gist Library. Built with modern web technologies.</p>
      <div class="footer-stats">
        <span id="total-gists">0 Gists</span>
        <span id="total-favorites">0 Favorites</span>
        <span id="total-downloads">0 Downloads</span>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-php.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-jsx.min.js"></script>
  <script src="gist-library.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      initializeEventListeners();
      updateStats();
    });

function initializeEventListeners() {
 document.getElementById('add-gist').addEventListener('click', () => {
        document.getElementById('add-gist-modal').classList.add('active');
      });
 document.getElementById('export-favorites').addEventListener('click', () => {
        GistLibrary.exportFavorites();
      });
 document.querySelectorAll('.close-modal, .modal-overlay').forEach(el => {
        el.addEventListener('click', (e) => {
          e.target.closest('.modal').classList.remove('active');
        });
      });
 document.getElementById('add-gist-form').addEventListener('submit', handleAddGist);
 document.getElementById('cancel-add-gist').addEventListener('click', () => {
        document.getElementById('add-gist-modal').classList.remove('active');
      });
 document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.addEventListener('click', handleNavFilter);
      });
  
    const searchInput = document.getElementById('search-input');
    let searchTimeout;
  
    searchInput.addEventListener('input', (e) => {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
          performSearch(e.target.value);
        }, 300);
      });
     document.getElementById('language-filter').addEventListener('change', applyFilters);
     document.getElementById('category-filter').addEventListener('change', applyFilters);
     document.getElementById('sort-filter').addEventListener('change', applyFilters);
    }

    function handleAddGist(e) {
      e.preventDefault();
      const formData = {
        title: document.getElementById('gist-title').value,
        description: document.getElementById('gist-description').value,
        language: document.getElementById('gist-language').value,
        category: document.getElementById('gist-category').value,
        tags: document.getElementById('gist-tags').value.split(',').map(t => t.trim()).filter(Boolean),
        code: document.getElementById('gist-code').value,
        extension: getExtension(document.getElementById('gist-language').value),
        dateCreated: new Date().toISOString(),
        dateModified: new Date().toISOString(),
        views: 0,
        downloads: 0
      };
      const newGist = GistLibrary.addGist(formData);
      const card = GistLibrary.UIBuilder.createGistCard(newGist);
      document.getElementById('gist-container').prepend(card);
      GistLibrary.AnimationManager.animateCard(card);
      // Reset form and close modal
      e.target.reset();
      document.getElementById('add-gist-modal').classList.remove('active');
      updateStats();
    }

    function getExtension(language) {
      const extensions = {
        javascript: '.js',
        python: '.py',
        css: '.css',
        html: '.html',
        php: '.php',
        sql: '.sql',
        react: '.jsx',
        vue: '.vue'
      };
      return extensions[language] || '.txt';
    }

    function handleNavFilter(e) {
      document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
      e.target.classList.add('active');
      const filter = e.target.dataset.filter;
      const container = document.getElementById('gist-container');
      if (filter === 'favorites') {
        const favorites = GistLibrary.getFavorites();
        renderGists(favorites);
      } else if (filter === 'recent') {
        const recent = GistLibrary.getRecentViews();
        renderGists(recent);
      } else {
        GistLibrary.renderGists('#gist-container');
      }
    }

    function performSearch(query) {
      const filters = {
        language: document.getElementById('language-filter').value,
        category: document.getElementById('category-filter').value,
        sortBy: document.getElementById('sort-filter').value
      };
      const results = GistLibrary.search(query, filters);
      renderGists(results);
    }

    function applyFilters() {
      const query = document.getElementById('search-input').value;
      performSearch(query);
    }

    function renderGists(gists) {
      const container = document.getElementById('gist-container');
      container.innerHTML = '';
      if (gists.length === 0) {
        container.innerHTML = '<div class="no-results">No gists found matching your criteria.</div>';
        return;
      }
      gists.forEach(gist => {
        const card = GistLibrary.UIBuilder.createGistCard(gist);
        container.appendChild(card);
        GistLibrary.AnimationManager.animateCard(card);
      });
      // Re-apply syntax highlighting
      Prism.highlightAll();
    }

    function updateStats() {
      let totalGists = 0;
      let totalDownloads = 0;
      Object.values(GistLibrary.gistDatabase).forEach(gists => {
        totalGists += gists.length;
        gists.forEach(gist => {
          totalDownloads += gist.downloads;
        });
      });
      const totalFavorites = GistLibrary.Storage.get(GistLibrary.Storage.KEYS.FAVORITES).length;
      document.getElementById('total-gists').textContent = `${totalGists} Gists`;
      document.getElementById('total-favorites').textContent = `${totalFavorites} Favorites`;
      document.getElementById('total-downloads').textContent = `${totalDownloads} Downloads`;
    }
  </script>
</body>

</html>
